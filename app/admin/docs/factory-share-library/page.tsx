import { Card, CardContent } from "@/components/ui/card"
import { getCurrentSession } from "@/lib/auth-utils"
import { redirect } from "next/navigation"
import { Button } from "@/components/ui/button"
import Link from "next/link"
import MarkdownRenderer from "@/components/admin/MarkdownRenderer"

export default async function FactoryShareLibraryDocPage() {
    const session = await getCurrentSession()

    if (!session?.user?.id || session.user.role !== "ADMIN") {
        redirect("/login")
    }

    const content = `
# ğŸ“¤ åˆ†äº«åº“é›†æˆæŒ‡å—

## ğŸ“– æ¦‚è¿°

**ShareResult** æ˜¯ä¸€ä¸ªé€šç”¨çš„åˆ†äº«ç»„ä»¶ï¼Œæ—¨åœ¨ä¸ºæ‰€æœ‰å·¥å…·æä¾›ç»Ÿä¸€çš„**ç»“æœåˆ†äº«**å’Œ**æˆªå›¾ä¸‹è½½**åŠŸèƒ½ã€‚å®ƒæ— ç¼é›†æˆåˆ°ç°æœ‰çš„å·¥å‚æ¨¡å¼ä¸­ï¼Œåªéœ€å‡ è¡Œä»£ç å³å¯ä¸ºä½ çš„å·¥å…·æ·»åŠ ç¤¾äº¤æ¨å¹¿èƒ½åŠ›ã€‚

### æ ¸å¿ƒåŠŸèƒ½

- ğŸ“¸ **è‡ªåŠ¨æˆªå›¾**ï¼šå°†æŒ‡å®šåŒºåŸŸï¼ˆå¦‚ç”Ÿæˆç»“æœï¼‰è‡ªåŠ¨è½¬æ¢ä¸ºå›¾ç‰‡å¹¶ä¸‹è½½ã€‚
- ğŸ”— **ç¤¾äº¤åˆ†äº«**ï¼šä¸€é”®åˆ†äº«åˆ° Twitter, Facebook, LinkedInã€‚
- ğŸ“‹ **å¤åˆ¶é“¾æ¥**ï¼šå¿«é€Ÿå¤åˆ¶å½“å‰å·¥å…·é¡µé¢çš„é“¾æ¥ã€‚
- ğŸ¨ **é«˜åº¦å®šåˆ¶**ï¼šæ”¯æŒè‡ªå®šä¹‰æ ‡é¢˜ã€åˆ†äº«æ–‡æ¡ˆå’Œæ ·å¼ã€‚

---

## ğŸš€ å¦‚ä½•ä½¿ç”¨

### 1. å¼•å…¥ç»„ä»¶

åœ¨ä½ çš„å·¥å…·ç»„ä»¶æ–‡ä»¶ï¼ˆä¾‹å¦‚ \`components/tools/YourTool.tsx\`ï¼‰ä¸­å¼•å…¥ \`ShareResult\` å’Œ \`useRef\`ã€‚

\`\`\`typescript
import { useRef } from "react"
import { ShareResult } from "@/components/tools/ShareResult"
\`\`\`

### 2. åˆ›å»ºå¼•ç”¨ (Ref)

åˆ›å»ºä¸€ä¸ª \`ref\` æŒ‡å‘ä½ æƒ³è¦æˆªå›¾çš„ DOM å…ƒç´ ã€‚é€šå¸¸æ˜¯åŒ…å«ç”Ÿæˆç»“æœçš„å®¹å™¨ã€‚

\`\`\`typescript
export default function YourTool({ result }: { result: string }) {
  // åˆ›å»º ref
  const resultRef = useRef<HTMLDivElement>(null)

  return (
    <div>
      {/* å°† ref ç»‘å®šåˆ°ç»“æœå®¹å™¨ */}
      <div ref={resultRef} className="p-6 bg-white rounded-xl border">
        <h2 className="text-xl font-bold mb-4">ç”Ÿæˆç»“æœ</h2>
        <div className="prose">{result}</div>
        
        {/* åœ¨ç»“æœåº•éƒ¨æ·»åŠ æ°´å°æˆ–å“ç‰Œæ ‡è¯† (å¯é€‰) */}
        <div className="mt-4 text-sm text-gray-400">
          Generated by AI Website Tools
        </div>
      </div>

      {/* 3. æ·»åŠ  ShareResult ç»„ä»¶ */}
      <ShareResult 
        contentRef={resultRef}       // å¿…å¡«ï¼šç»‘å®š ref
        title="my-awesome-result"    // é€‰å¡«ï¼šä¸‹è½½æ–‡ä»¶å
        shareText="æˆ‘åˆšåˆšç”¨è¿™ä¸ªAIå·¥å…·ç”Ÿæˆäº†è¶…æ£’çš„å†…å®¹ï¼" // é€‰å¡«ï¼šåˆ†äº«æ–‡æ¡ˆ
      />
    </div>
  )
}
\`\`\`

---

## âš™ï¸ å‚æ•°è¯´æ˜ (Props)

| å‚æ•°å | ç±»å‹ | å¿…å¡« | é»˜è®¤å€¼ | è¯´æ˜ |
|Data | Type | Required | Default | Description |
|---|---|---|---|---|
| \`contentRef\` | \`RefObject<HTMLElement>\` | âœ… æ˜¯ | - | æŒ‡å‘è¦æˆªå›¾çš„ DOM å…ƒç´  |
| \`title\` | \`string\` | âŒ å¦ | "ai-tool-result" | ä¸‹è½½å›¾ç‰‡çš„æ–‡ä»¶åå‰ç¼€ |
| \`shareText\` | \`string\` | âŒ å¦ | (é»˜è®¤æ–‡æ¡ˆ) | ç¤¾äº¤åª’ä½“åˆ†äº«æ—¶çš„é¢„å¡«æ–‡å­— |
| \`shareUrl\` | \`string\` | âŒ å¦ | å½“å‰é¡µé¢ URL | åˆ†äº«çš„é“¾æ¥åœ°å€ |
| \`className\` | \`string\` | âŒ å¦ | - | è‡ªå®šä¹‰ç»„ä»¶å¤–å±‚æ ·å¼ |

---

## ğŸ’¡ æœ€ä½³å®è·µ

1. **åŒ…å«å“ç‰Œæ ‡è¯†**ï¼šå»ºè®®åœ¨ \`contentRef\` åŒ…è£¹çš„åŒºåŸŸå†…æ·»åŠ ç½‘ç«™ Logo æˆ–åç§°ï¼Œè¿™æ ·ç”¨æˆ·ä¸‹è½½å›¾ç‰‡åˆ†äº«æ—¶èƒ½èµ·åˆ°æ¨å¹¿ä½œç”¨ã€‚
2. **æ ·å¼éš”ç¦»**ï¼š\`ShareResult\` ç»„ä»¶é»˜è®¤æœ‰ä¸Šè¾¹è·å’Œè™šçº¿è¾¹æ¡†ï¼Œé€‚åˆæ”¾åœ¨ç»“æœåŒºåŸŸçš„ä¸‹æ–¹ã€‚
3. **æ·±è‰²æ¨¡å¼**ï¼šæˆªå›¾åŠŸèƒ½æ”¯æŒæ·±è‰²æ¨¡å¼ï¼Œä½†å»ºè®®åœ¨ç»“æœå®¹å™¨ä¸Šæ˜¾å¼è®¾ç½®èƒŒæ™¯è‰²ï¼ˆå¦‚ \`bg-background\` æˆ– \`bg-white\`ï¼‰ï¼Œä»¥ç¡®ä¿ç”Ÿæˆçš„å›¾ç‰‡èƒŒæ™¯æ­£ç¡®ã€‚

---

## ç¤ºä¾‹ä»£ç 

æŸ¥çœ‹ \`components/tools/ShareResult.tsx\` äº†è§£æºç å®ç°ã€‚
`

    return (
        <div>
            <div className="flex items-center justify-between mb-8">
                <div>
                    <h1 className="text-3xl font-bold">ğŸ“¤ åˆ†äº«åº“é›†æˆæŒ‡å—</h1>
                    <p className="text-muted-foreground">ä¸ºå·¥å…·æ·»åŠ æˆªå›¾ä¸‹è½½ä¸ç¤¾äº¤åˆ†äº«åŠŸèƒ½</p>
                </div>
                <Link href="/admin/docs">
                    <Button variant="outline">â† è¿”å›æ–‡æ¡£åˆ—è¡¨</Button>
                </Link>
            </div>

            <Card>
                <CardContent className="pt-6">
                    <MarkdownRenderer content={content} />
                </CardContent>
            </Card>
        </div>
    )
}
